<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, user-scalable=no">

<title>A Mad Workshop!</title>

<script type="text/javascript">
// Frame buster
if(top !== self) {
  top.location.replace(self.location.href);
}
</script>

<script type="text/javascript" src="draggabilly.pkgd.min.js"></script>
<script type="text/javascript" src="EventEmitter.min.js"></script>
<script type="text/javascript" src="panelui.js"></script>

<link rel="stylesheet" href="font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="panelui_light.css" id="light_colors">
<link rel="stylesheet" href="panelui_dark.css" id="dark_colors">
<link rel="stylesheet" href="panelui.css">

<style type="text/css">
.panel {
  position: relative;
  top: 12px;
  left: calc(50% - 132px);
  width: 300px;
  margin-bottom: 12px;
}

.panel_image {
  width: 100%;
  padding-top: 6px;
  padding-bottom: 6px;
}
</style>
</head>

<body>
<div id="background"></div>

<a title="Real Time Web Analytics" style="visibility:hidden" href="http://clicky.com/100755588"><img alt="Real Time Web Analytics" src="//static.getclicky.com/media/links/badge.gif" border="0" /></a>
<script type="text/javascript">
var clicky_site_ids = clicky_site_ids || [];
clicky_site_ids.push(100755588);
(function() {
  var s = document.createElement('script');
  s.type = 'text/javascript';
  s.async = true;
  s.src = '//static.getclicky.com/js';
  ( document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0] ).appendChild( s );
})();
</script>
<noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/100755588ns.gif" /></p></noscript>

</body>

<script type="text/javascript">

var fE = PanelUI.forgeElement;

var ProjectPanel = function(options) {
  if(options.closeButton == null) {
    options.closeButton = false;
  }
  
  PanelUI.Panel.call(this, options);
  
  this.domElement.appendChild(
    fE('a', {href: options.href}, [
      fE('img', {className: 'panel_image', src: options.image}),
    ])
  );
  
  this.domElement.appendChild(
    fE('text', {className: 'panel_text', innerHTML: options.text})
  );
  
}
ProjectPanel.prototype = Object.create(PanelUI.Panel.prototype);
ProjectPanel.prototype.constructor = ProjectPanel;

new ProjectPanel({
  id: 'castle',
  href: 'castle.html',
  image: 'castle_screen.png',
  heading: 'A Castle in the Cloud',
  date: '9 Jan 2015',
  text: 'WebGL demo built with THREE.js. Features touchscreen, accelerometer, and gamepad control.',
}).open();

new ProjectPanel({
  id: 'SimpleGPS',
  href: 'SimpleGPS.html',
  image: 'SimpleGPS_screen.png',
  heading: 'Simplified GPS and compass app for Firefox',
  date: '27 Sep 2014',
  text: 'SimpleGPS is a GPS and compass app for Firefox that shows current coordinates, heading, and target distance and heading.',
}).open();

// Went live with madengineersworkshop.net on 15 Jul 2014 - Lunariel
new ProjectPanel({
  id: 'mars',
  href: 'mars.html',
  image: 'mars_screen.png',
  heading: 'WebGL view of my model for the MakerBotMars competition',
  date: '15 July 2014',
  text: 'Hello, this <a href="http://www.thingiverse.com/thing:362133" target="_blank">Mars Base model</a> is the first entry for the Mad Engineer\'s Workshop. It\'s written with WebGL (and the three.js library), and is also my first attempt at making a 3D printing model. Nothing will actually be printed until I get a 3D printer though...',
}).open();

var sidebar = new PanelUI.Sidebar();

sidebar.addButton({buttonName: 'land', faClass: 'fa-university', title: 'Landing page'});
sidebar.on('land', function(e) {
  document.location.href = document.location.origin + '/index.html';
});

sidebar.addButton({buttonName: 'clear', faClass: 'fa-recycle', title: 'Clear local storage'});
sidebar.on('clear', function(e) {
  localStorage.clear();
});

var darkColors = document.getElementById('dark_colors');
var head = darkColors.parentNode;
var contrastFlipped = false;

if(localStorage.contrast === 'light') {
  head.removeChild(darkColors);
}

sidebar.addButton({buttonName: 'contrast', faClass: 'fa-adjust', title: 'Flip Contrast'});
sidebar.on('contrast', function(e) {
  if(contrastFlipped = !contrastFlipped) {
    head.removeChild(darkColors);
    localStorage.contrast = 'light';
  } else {
    head.appendChild(darkColors);
    localStorage.contrast = 'dark';
  }
});

/////////////////////
// Startup scripts //
/////////////////////

eval(localStorage.onstart);

</script>
</html>
